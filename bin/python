#!/usr/bin/env bash
set -euo pipefail

# Project-local shim to ensure `python` resolves predictably.
# Preference order:
# 1) Absolute project venv: /opt/retrowaves/venv/bin/python
# 2) Relative venv next to this repo: ../venv/bin/python
# 3) System python3

ABS_VENV="/opt/retrowaves/venv/bin/python"
REL_VENV="$(dirname "$0")/../venv/bin/python"

if [ -x "$ABS_VENV" ]; then
  exec "$ABS_VENV" "$@"
elif [ -x "$REL_VENV" ]; then
  exec "$REL_VENV" "$@"
elif command -v python3 >/dev/null 2>&1; then
  exec python3 "$@"
else
  echo "Error: python3 not found. Please install Python 3." >&2
  exit 127
fi

