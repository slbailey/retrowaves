# Retrowaves Tower Configuration
# Copy this file to /etc/retrowaves/tower.env and customize as needed
# Environment variables take precedence over this file

# ============================================================================
# Network & Server Configuration
# ============================================================================

# HTTP server host (default: 0.0.0.0)
TOWER_HOST=0.0.0.0

# HTTP server port (default: 8005)
TOWER_PORT=8005

# Maximum number of concurrent HTTP clients (default: 100)
TOWER_MAX_CLIENTS=100

# Client timeout in milliseconds (default: 250)
TOWER_CLIENT_TIMEOUT_MS=250

# ============================================================================
# PCM Ingestion Configuration
# ============================================================================

# Unix domain socket path for PCM ingestion (default: /run/retrowaves/pcm.sock)
# Note: /var/run is typically a symlink to /run, but /run is preferred
TOWER_PCM_SOCKET_PATH=/run/retrowaves/pcm.sock

# ============================================================================
# MP3 Buffer Configuration
# ============================================================================

# MP3 buffer capacity in frames (default: 400)
# 400 frames â‰ˆ 5 seconds at ~66 fps (24ms per MP3 frame)
TOWER_MP3_BUFFER_CAPACITY_FRAMES=400

# ============================================================================
# Encoder Configuration
# ============================================================================

# Enable encoder debug mode (default: 0)
# Set to 1 to enable verbose FFmpeg logging
TOWER_ENCODER_DEBUG=0

# ============================================================================
# Fallback Audio Configuration
# ============================================================================

# Tone generator frequency in Hz (default: 440)
TOWER_TONE_FREQUENCY=440

# PCM grace period in seconds before switching to tone fallback (default: 5)
# Prevents tone blips during short gaps between MP3 files
TOWER_PCM_GRACE_SEC=5

# Path to MP3/WAV file for file-based fallback (optional)
# If set and file exists, this file will be looped as fallback audio instead of tone
# Example: /path/to/tones/please_stand_by.mp3
# If unset or invalid, falls back to 440Hz tone generator
TOWER_SILENCE_MP3_PATH=/mnt/media/appalachia-radio/tones/please_stand_by.mp3

# ============================================================================
# Logging Configuration
# ============================================================================

# Logging level (default: INFO)
# Valid values: DEBUG, INFO, WARNING, ERROR, CRITICAL
TOWER_LOG_LEVEL=INFO

# ============================================================================
# Test/Development Configuration
# ============================================================================

# Test mode (default: 0)
# Set to 1 to enable test mode (reduces backoff delays)
TOWER_TEST_MODE=0
